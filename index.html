<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Epik - Lightweight MVC/MVP Framework for modern web development</title>
	<link href="css/doctor.css" type="text/css" rel="stylesheet">
	
		<!-- Google Analytics -->
		<script type="text/javascript">
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-1199722-3']);
			_gaq.push(['_trackPageview']);
			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		</script>
	
</head>
<body>

<a id="github-ribbon" href="https://github.com/DimitarChristoff/epik"><img alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

<div id="nav">
	<div class="separator"></div>
	<a title="Epik - Lightweight MVC/MVP Framework for modern web development" class="brand" href="#" style="background-image:url(images/epitome-logo-small.png)"></a>
	<div class="separator"></div>
	
		<div class="twitter extra">

			<iframe allowtransparency="true" frameborder="0" scrolling="no" style="width: 162px; height: 20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=D_mitar&amp;show_count=false"></iframe>
		</div>
		<div class="separator"></div>
	
	<ul id="sections"><li class="l2"><a href="#getting-started">Getting started</a><ul><li class="l3"><a href="#getting-started/amd-configuration">AMD configuration</a></li></ul></li><li class="l2"><a href="#model">Model</a><ul><li class="l3"><a href="#model/constructor-initialize">constructor (initialize)</a></li><li class="l3"><a href="#model/set">set</a></li><li class="l3"><a href="#model/get">get</a></li><li class="l3"><a href="#model/tojson">toJSON</a></li><li class="l3"><a href="#model/unset">unset</a></li><li class="l3"><a href="#model/empty">empty</a></li><li class="l3"><a href="#model/destroy">destroy</a></li><li class="l3"><a href="#model/validate">validate</a></li><li class="l3"><a href="#model/model-properties">Model properties*</a></li></ul></li><li class="l2"><a href="#model-sync">Model Sync</a></li><li class="l2"><a href="#collection">Collection</a></li><li class="l2"><a href="#collection-sync">Collection Sync</a></li><li class="l2"><a href="#view">View</a><ul><li class="l3"><a href="#view/constructor">constructor</a></li><li class="l3"><a href="#view/render">render</a></li><li class="l3"><a href="#view/setelement">setElement</a></li><li class="l3"><a href="#view/template">template</a></li><li class="l3"><a href="#view/empty">empty</a></li><li class="l3"><a href="#view/dispose">dispose</a></li><li class="l3"><a href="#view/destroy">destroy</a></li></ul></li><li class="l2"><a href="#view-rivetsadapter">View rivets-adapter</a><ul><li class="l3"><a href="#view-rivetsadapter/bindrivets">bindRivets</a></li><li class="l3"><a href="#view-rivetsadapter/unbindrivets">unbindRivets</a></li><li class="l3"><a href="#view-rivetsadapter/syncrivets">syncRivets</a></li></ul></li><li class="l2"><a href="#contributing">Contributing</a></li></ul>
	<div class="separator"></div>
	
		<div class="extra" id="github">
			<a href="https://github.com/DimitarChristoff/epik">Source on Github</a>
		</div>
		<div class="extra" id="github-issues">
			<a href="https://github.com/DimitarChristoff/epik/issues">Issues</a>
		</div>
	
	
		<div class="separator"></div>
		<div class="extra" id="github">
			<a href="http://travis-ci.org/DimitarChristoff/epik" class="travis">
				<img src="http://travis-ci.org/DimitarChristoff/epik.png?branch=master"></a>
		</div>

	
	<div class="extra generated">
		Generated by <a href="https://github.com/DimitarChristoff/doctor" target="_blank" title="generate documentation from markdown">Doctor, MD</a>
	</div>
</div>
<div id="content" class="container">
	<h1 id="epik">epik</h1>
<p>epitome 2 for primish and lodash, no depenency on mootools</p>
<blockquote>
<p>this is an experiment. if you like primish, mootools and epitome, feel free to contribute. otherwise, don&#39;t use.</p>
</blockquote>
<h2 id="getting-started">Getting started</h2>
<p>Via bower:</p>
<pre><code class="lang-sh">$ bower install epik --save
</code></pre>
<p>For node:</p>
<pre><code class="lang-sh">$ npm install epik --save
</code></pre>
<h3 id="getting-started/amd-configuration">AMD configuration</h3>
<p>You can use epik in a number of ways.</p>
<p>In development, you can let requirejs fetch all dependencies as needed. A typical require.config looks like this:</p>
<pre class="prettyprint linenums"><code class="lang-javascript">require.config({
    paths: {
            epik: &#39;../bower_components/epik/lib&#39;,
            &#39;rivets-adapter&#39;: &#39;../bower_components/epik/lib/plugins/rivets-adapter&#39;,
            primish: &#39;../bower_components/primish&#39;,
            lodash: &#39;../bower_components/lodash/dist/lodash&#39;,
            slicker: &#39;../bower_components/slicker/index&#39;,
            rivets: &#39;../bower_components/rivets/dist/rivets&#39;,
            jquery: &#39;../bower_components/jquery/jquery&#39;
        }
    });
});
</code></pre>
<p>The above is applicable after a <code>bower install epik --save</code> and will dynamically load any components as needed.
Obviously, you may have a different config for <code>jquery</code>, <code>lodash</code> and <code>rivets</code> so reflect them as needed - epik will require
them via the root level ids of <code>jquery</code>, <code>lodash</code> and <code>rivets</code> respectively.</p>
<p>If you prefer, you can use the builds of epik instead. There are two builds shipped - a minimum one, which includes only
the epik files (and <code>slicker</code>) and a full one, which includes ALL dependencies, <code>lodash</code>, <code>rivets</code> and <code>jquery</code> into the
build.</p>
<p>There are module ids set so you can use the RequireJS 2.1.9 feature <a href="http://requirejs.org/docs/api.html#config-bundles">bundles</a> and
define where to find the resolved modules.</p>
<p>An example config using the minified built epik would look like this:</p>
<pre class="prettyprint linenums"><code class="lang-javascript">require.config({
    paths: {
        epik: &#39;../bower_components/epik/lib&#39;,
        primish: &#39;../bower_components/primish&#39;,
        lodash: &#39;../bower_components/lodash/dist/lodash&#39;,
        rivets: &#39;../bower_components/rivets/dist/rivets&#39;,
        jquery: &#39;../bower_components/jquery/jquery&#39;
    },
    bundles: {
        &#39;epik/epik-min&#39;: [
            &#39;epik/index&#39;,
            &#39;epik/model&#39;,
            &#39;epik/model-sync&#39;,
            &#39;epik/collection&#39;,
            &#39;epik/collection-sync&#39;,
            &#39;epik/agent&#39;,
            &#39;epik/storage&#39;,
            &#39;epik/router&#39;,
            &#39;epik/view&#39;,
            &#39;epik/plugins/rivets-adapter&#39;,
            &#39;slicker&#39;
        ]
    }
});
</code></pre>
<p>Once that is setup, requests for <code>epik/model</code> on an empty require module factory will get the minified built version and
prime the factory against the module IDs defined above. You should only see a single HTTP request in your console for
<code>epik-min.js</code>. Notice <code>slicker</code> is bundled already and the rivets adapter is with the id of <code>epik/plugins/rivets-adapter</code>.</p>
<p>Usage in both cases remains the same.</p>
<pre class="prettyprint linenums"><code class="lang-javascript">require.config({ ... }});

define(function(require){

    var primish = require(&#39;primish/primish&#39;),
        Model = require(&#39;epik/model-sync&#39;);

    var User = primish({
        extend: Model
    });

    // ...
});
</code></pre>
<p>If you use the FULL build from <code>dist/build/epik-full-min.js</code>, you would also have to add to the bundles config to let
requirejs know it will resolve rivets.js, jquery, lodash and primish as well:</p>
<pre class="prettyprint linenums"><code class="lang-javascript">require.config({
    paths: {
        epik: &#39;../bower_components/epik/lib&#39;,
        primish: &#39;../bower_components/primish&#39;,
        lodash: &#39;../bower_components/lodash/dist/lodash&#39;,
        rivets: &#39;../bower_components/rivets/dist/rivets&#39;,
        jquery: &#39;../bower_components/jquery/jquery&#39;
    },
    bundles: {
        &#39;epik/epik-min&#39;: [
            &#39;epik/index&#39;,
            &#39;epik/model&#39;,
            &#39;epik/model-sync&#39;,
            &#39;epik/collection&#39;,
            &#39;epik/collection-sync&#39;,
            &#39;epik/agent&#39;,
            &#39;epik/storage&#39;,
            &#39;epik/router&#39;,
            &#39;epik/view&#39;,
            &#39;epik/plugins/rivets-adapter&#39;,
            &#39;slicker&#39;,
            &#39;jquery&#39;,
            &#39;lodash&#39;,
            &#39;rivets&#39;,
            &#39;primish/primish&#39;,
            &#39;primish/emitter&#39;,
            &#39;primish/options&#39;
        ]
    }
});
</code></pre>
<p>Keep in mind that the strings passed to the bundles config are module IDs, not expanded paths.</p>
<h2 id="model">Model</h2>
<p>The epik Model implementation at its core is a <a href="https://github.com/DimitarChristoff/primish">primish</a> class with custom data accessors that fires events. You can extend models or implement objects or other classes into your definitions.</p>
<p>The Model can fire the following events:</p>
<ul>
<li><code>ready</code> - when instantiated</li>
<li><code>change</code> - when any properties have changed</li>
<li><code>change:key</code> - when a particular property <code>key</code> has changed</li>
<li><code>empty</code> - when a model has been emptied of all properties</li>
<li><code>destroy</code> - when a model has been <code>destroyed</code> and all data removed.</li>
<li><code>error</code> - when a model validator fails on a property set.</li>
<li><code>error:key</code> - when a particular key validation error has occurred</li>
</ul>
<p>The following methods are official API on all Model Classes:</p>
<h3 id="model/constructor-initialize">constructor (initialize)</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: <code>(Object) obj</code>, <code>(Object) options</code></em>
</p>
<p>
<em>Returns: <code>this</code></em>
</p>
<p>
<em>Events: <code>ready</code></em>
</p>
</div>

<p>The <code>obj</code> sets the internal data hash to a new derefrenced object. Special accessor properties, as defined in the <code>epik.model.prototype.properties</code>, will run first and be applicable. See <a href="#model/model-properties">properties</a> for more info.</p>
<p>The <code>options</code> object is a <code>setOptions</code> override and is being merged with the <code>epik.model.prototype.options</code> when a new model is created. It typically contains various event handlers in the form of:</p>
<pre class="prettyprint linenums"><code class="lang-ace">require([&#39;epik/index&#39;, &#39;epik/model&#39;], function(epik, Model){

    var Person = epik.primish(&#39;person&#39;, {
        extend: Model,
        defaults: {
            sex: &#39;male&#39;,
            title: &#39;Mr.&#39;,
            age: 0
        }
    });

    var bob = new Person({
        name: &#39;Bob&#39;,
        age: 30
    });

    console.log(bob.toJSON());
    console.log(bob._id); // &#39;person&#39;
});
</code></pre>
<h3 id="model/set">set</h3>
<hr>
<div class="alert" markdown="1">
<p>
<em>Expects arguments: mixed: <code>(String) key</code>, <code>(Mixed) value</code> - pair - or: <code>(Object) obj</code></em>
</p>
<p>
<em>Returns: <code>this</code></em>
</p>
<p>
<em>Events:</em>

<ul>
 <li> <code>change: function(changedProperties) {}</code></li>
 <li> <code>change:key: function(valueForKey) {}</code></li>
 <li> <code>error: function(objectFailedValidation) {}</code></li>
 <li> <code>error:key: function(objectFailedValidation) {}</code></li>
</ul>
</p>
</div>

<p>Allows changing of any individual model key or a set of key/value pairs, encapsulated in an object. Will fire a single <code>change</code> event with all the changed properties as well as a specific <code>change:key</code> event that passes just the value of the key as argument.</p>
<p>For typing of value, you can store anything at all (Primitives, Objects, Functions). Keep in mind that, when it comes to serialising the Model and sending it to the server, only Primitive types or ones with a sensible <code>toString()</code> implementation will make sense.</p>
<h3 id="model/get">get</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments mixed: <code>(String) key</code> or <code>(Array) keys</code></em>
</p>
<p>
<em>Returns: <code>this</code></em>
</p>
</div>

<p>Returns known values within the model for either a single key or an array of keys. For an array of keys, it will return an object with <code>key</code> : <code>value</code> mapping. Properties gotten are not implicitly de-refrenced so careful if you have stored an object - modifying the value of the <code>get</code> will modify your model as well.</p>
<p>The following example illustrates why it&#39;s a bad idea to store deep model properties. Alternatively, you can use <code>instance.toJSON()</code> and reference and modify properties off of that without them making it back into the model.</p>
<pre class="prettyprint linenums"><code class="lang-ace">require([&#39;epik/index&#39;, &#39;epik/model&#39;], function(epik, Model){

    var Person = epik.primish(&#39;person&#39;, {
        extend: Model,
        defaults: {
            sex: &#39;male&#39;,
            title: &#39;Mr.&#39;,
            age: 0
        }
    });

    var bob = new Person({
        a: &#39;a&#39;,
        b: &#39;b&#39;,
        location: {
            country: &#39;UK&#39;,
            city: &#39;London&#39;
        }
    });

    var location = bob.get(&#39;location&#39;);
    console.log(location.city); // London
    location.city = &#39;Manchester&#39;;
    console.log(bob.get(&#39;location&#39;).city); // Manchester. oh no!

    // get around dereferencing
    location = epik._.clone(bob.get(&#39;location&#39;));
    location.city = &#39;London&#39;;
    console.log(bob.get(&#39;location&#39;).city); // Still Manchester.

    // multiple property getters
    console.log(bob.get([&#39;a&#39;,&#39;b&#39;]));
});
</code></pre>
<h3 id="model/tojson">toJSON</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: none</em>
</p>
</div>

<p>Returns a de-referenced Object, containing all the known model keys and values.</p>
<h3 id="model/unset">unset</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: mixed: <code>(String) key</code> or <code>(Array) keys</code></em>
</p>
<p>
<em>Returns: <code>this</code></em>
</p>
</div>

<p>Removes keys from model, either a single one or an array of multiple keys. Should fire a change event for every property removed as well as a <code>change</code>.</p>
<h3 id="model/empty">empty</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: none</em>
</p>
<p>
<em>Returns: <code>this</code></em>
</p>
<p>
<em>Events: <code>empty</code></em>
</p>
</div>

<p>Empties the model of all data and fires a single change event with all keys as well as individual <code>change:key</code> events.</p>
<h3 id="model/destroy">destroy</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: none</em>
</p>
<p>
<em>Returns: <code>this</code></em>
</p>
<p>
<em>Events: <code>destroy</code></em>
</p>
</div>

<p>Empties the model. No change event. Event is observed by Collections the model is a member of, where it triggers a <code>remove()</code></p>
<h3 id="model/validate">validate</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: {String} key, {*} value</em>
</p>
<p>
<em>Returns: <code>{Boolean} validates</code></em>
</p>
</div>

<p>Internal method that gets run whenever a property is being set. Checks to see if there is a validator for the <code>key</code>, is so, returns the result of the validator function, else, assumes it&#39;s allowed and returns <code>true</code></p>
<h3 id="model/model-properties">Model properties*</h3>
<p>There are several additional properties each model instance will have.</p>
<h4 id="_attributes-object-">_attributes: {Object}</h4>
<hr>
<p>The attributes object is <strong>public</strong> (exposed to manipulation on the instance) and it holds the hash data for the model, based upon keys. It is de-referenced from the constructor object used when creating a model but should not be read directly (normally). Exported by <code>model.toJSON()</code>. Avoid changing this directly as it won&#39;t fire any change events at all.</p>
<h4 id="_collections-array-">_collections: {Array}</h4>
<hr>
<p>An array that contains references to all instances of epik.collection that the model is currently a member of. Useful for iteration as well as utilised by collections that subscribe to events for models.</p>
<h4 id="options-object-">options: {Object}</h4>
<hr>
<p>A default options set, which can be on the prototype of the Model constructor.</p>
<h4 id="defaults-object-">defaults: {Object}</h4>
<hr>
<p>An object with default Model Attributes to use when instantiating. Merged with Model object when populating model data via the constructor.</p>
<h4 id="propertieschanged-array-">propertiesChanged: {Array}</h4>
<hr>
<p>An array of all property keys that reflect the last <code>change</code> event. Available on all instances.</p>
<h4 id="validationfailed-array-">validationFailed: {Array}</h4>
<hr>
<p>An array of all error Objects with info on all validation failed properties after a <code>set</code>. Available on all instances.</p>
<h4 id="properties-object-">properties: {Object}</h4>
<hr>
<p>A collection of custom accessors that override default <code>model.get</code> and <code>model.set</code> methods. For example:</p>
<pre class="prettyprint linenums"><code class="lang-javascript">properties: {
    dob: {
        get: function() {
            // scope is model
            return new Date(this._attributes.dob);
        },
        set: function(value) {
            // return a value to be set
            return value instanceof Date ? +value : value;
        }
    },
    id: {
        get: function(){
            // returns a property from instance instead of _attributes
            return this.id;
        },
        set: function(id){
            this.id = id;
            // may want to fire events manually here.
        }
    }
}
</code></pre>
<p>In the examples above, any calls to <code>model.set(&#39;dob&#39;, new Date(1985, 5, 15))</code> and <code>model.get(&#39;dob&#39;)</code> are handled by custom functions as we want our model to deal with unix timestamps only but return Date instances. This is a pattern that allows you to use getters and setters for properties that are handled differently than normal ones. If the <code>set</code> function returns a value, it will use the normal <code>set</code> chain and act as a formatter/pre-processor, firing events etc. You don&#39;t have to use this and can do as in the <code>id</code> example, where the value is simply redirected elsewhere.</p>
<p>Avoid setting them on prototypes that you extend from, better to have them on the instance from the constructor or another method as they are not de-referenced and are not being merged. If you need to extend them and keep the default id getter, you need to merge with <code>model.prototype.properties</code> in your new model definitions. This may change in future versions.</p>
<pre class="prettyprint linenums"><code class="lang-javascript">var Person = primish({
    properties: _.merge({
        foo: {
            get: function(){},
            set: function(){}
        }
    }, epik.model.prototype.properties);
});
</code></pre>
<h2 id="model-sync">Model Sync</h2>
<p>tbc</p>
<h2 id="collection">Collection</h2>
<p>tbc</p>
<h2 id="collection-sync">Collection Sync</h2>
<p>tbc</p>
<h2 id="view">View</h2>
<p>The view is very un-assuming. It can work with either DOM library (jquery, jquery-lite, zepto) and a templating
engine like handlebars or lodash.template. It can also work with a template binding engine like rivets.js. A combination
of both is also possible.</p>
<h3 id="view/constructor">constructor</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: <code>(Object) options</code></em>
</p>
<p>
<em>Returns: <code>this</code></em>
</p>
<p>
<em>Events: <code>ready</code></em>
</p>
</div>

<p>The default view is a pretty loose binding around a HTMLElement, it does not try to do much by default. It essentially binds an element to either a Model or a Collection, listening and propagating events that they fire in order to be able to react to them. It has glue to pass DOM events delegating into the element to the instance as events or by calling methods on the instance, when possible.</p>
<p>The expectation is that a <code>render</code> method will be defined that uses the data to output it in the browser. How the render can be called is up to you, eg. on <code>change</code> or <code>reset</code> events.</p>
<p>A single argument in the shape of an <code>options</code> Object is passed to the constructor of the View. It is expected to have special &#39;mutator&#39;-like properties and key properties that it stores for future use.</p>
<p>Significant keys to the options passed in are:</p>
<ul>
<li><code>element</code> - a String id or an element to bind events to and reference</li>
<li><code>model</code> - optional Model instance structure to bind to. Exchangeable with <code>collection</code></li>
<li><code>collection</code> - optional Collection instance to bind to. Exchangeable with <code>model</code></li>
<li><code>template</code> - a String of raw HTML that defines the raw template to use in output.</li>
<li><code>events</code> - an Object with MooTools style event bindings to apply to the <code>element</code>, delegated or not. values are implied event handlers on the instance</li>
<li><code>onEventHandlers</code> - code that reacts to various events that the instance fires.</li>
</ul>
<p>Epik views do not support the <code>tag</code> options of Backbone, you need to figure the elements on your own.</p>
<pre class="prettyprint linenums"><code class="lang-ace">require([
    &#39;epik/index&#39;,
    &#39;epik/view&#39;,
    &#39;epik/model&#39;
], function(epik, View, Model) {
    var primish = epik.primish,
        tpl = &#39;I am template &lt;a href=&quot;#&quot; class=&quot;task-remove&quot;&gt;&lt;%=name%&gt;&lt;/a&gt;&lt;br/&gt;&lt;button class=&quot;done&quot;&gt;done&lt;/button&gt;&#39;;

    var testView = primish({

        extend: View,

        options: {
            events: {
                &#39;click a.task-remove&#39;: &#39;removeTask&#39;,
                &#39;click button.done&#39;: &#39;reset&#39;
            }
        },

        render: function() {
            this.empty();
            this.$element.html(this.template(this.model.toJSON()));
            this.parent(&#39;render&#39;);
            return this;
        },

        reset: function() {
            this.model.empty();
            this.render();
        }
    });


    var testInstance = new testView({

        model: Model({name: &#39;View fun&#39;}),

        element: &#39;main&#39;,

        template: tpl,

        onReady: function() {
            this.render();
        },

        &#39;onModel:change&#39;: function(){
            this.model.set(&#39;name&#39;, new Date().getTime());
            this.render();
        },

        onRemoveTask: function(event, element) {
            event &amp;&amp; event.preventDefault &amp;&amp; event.preventDefault();
            console.log(element); // a.task-remove
            this.model.set(&#39;status&#39;, &#39;archived&#39;);
        }
    });
});
</code></pre>
<h3 id="view/render">render</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: unknown</em>
</p>
<p>
<em>Returns: <code>this</code></em>
</p>
<p>
<em>Events: <code>render</code></em>
</p>
</div>

<p>It is essential that this method is defined in your View prototype declaration. It does not assume to do anything by default, you <em>need</em> to define how the output takes place and how your data is being used. For convenience, it has access to either <code>this.model</code> or <code>this.collection</code> as the source of data that can be be passed to the <a href="#view/template">template</a> method. It is expected that at the bottom of your definition, <code>this.parent(&#39;render&#39;)</code> is called in order for the <code>render</code> event to fire, though you can manually do a <code>this.trigger(&#39;render&#39;)</code> instead, if you want.</p>
<h3 id="view/setelement">setElement</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: <code>(Mixed) element</code>, optional <code>(Object) events</code></em>
</p>
<p>
<em>Returns: <code>this</code></em>
</p>
</div>

<p>A public method that allows you to change or set an element that powers a view. If called the first time, it will get the Element (through <code>jQuery()</code>) and save the reference in <code>this.element</code> as well as <code>this.$element</code> to the wrapped jQuery object. If an events object is passed, it will bind the events. If called a second time, it will unbind all events on the old element, change the element reference and rebind any new events.</p>
<h3 id="view/template">template</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: <code>(Object) data</code>, optional <code>(String) template</code></em>
</p>
<p>
<em>Returns: compiled template or function.</em>
</p>
</div>

<p>A simple sandbox function where you can either use the lodash templating engine or call an external engine like Mustache, Handlebars, Hogan etc. The second argument is optional and if not supplied, it will revert to <code>this.options.template</code> instead.</p>
<p>An example override to make it work with Mustache would be:</p>
<pre class="prettyprint linenums"><code class="lang-javascript">var myView = primish({
    extends: Epitome.View,
    template: function(data, template) {
        template = template || this.options.template;
        return Mustache.render(template, data);
    },
    render: function() {
        this.$element.html(this.template({name:&#39;there&#39;}, &#39;Hello {{name}}&#39;));
    }
});
</code></pre>
<p>You can change the View prototype to always have Mustache in your views. For example, via AMD/RequireJS, you could do a
small module that deals with the prototyping of the default View constructor. Say, <code>epitome-view-mustache.js</code></p>
<pre class="prettyprint linenums"><code class="lang-javascript">
define([&#39;epik/view&#39;], function(View){
    // for everyone to use mustache in every view instance when .template()

    View.prototype.template = function(data, template) {
        // refactor this to work with any other template engine in your constructor
        template = template || this.options.template;

        return Mustache.render(template, data);
    }

    return View;
});
</code></pre>
<h3 id="view/empty">empty</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: <code>(Boolean) soft</code></em>
</p>
<p>
<em>Returns: this.</em>
</p>
<p>
<em>Events: <code>empty</code></em>
</p>
</div>

<p>By default, it will empty the element through making <code>innerHTML</code> an empty string, calling GC on all child nodes. If the <code>soft</code> argument is true, will apply <code>this.$element.empty()</code>, which is a jQuery method that removes all child nodes without destroying them.</p>
<h3 id="view/dispose">dispose</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: none</em>
</p>
<p>
<em>Returns: this.</em>
</p>
<p>
<em>Events: <code>dispose</code></em>
</p>
</div>

<p>Will detach <code>this.$element</code> from the DOM. It can be injected again later on.</p>
<h3 id="view/destroy">destroy</h3>
<hr>
<div class="alert">
<p>
<em>Expects arguments: none</em>
</p>
<p>
<em>Returns: this.</em>
</p>
<p>
<em>Events: <code>dispose</code></em>
</p>
</div>

<p>Removes and destroys <code>this.$element</code> from the DOM and from memory. You need to use <a href="#view/setelement">setElement</a> to add a new one if you want to re-render.</p>
<h2 id="view-rivetsadapter">View rivets-adapter</h2>
<p>There is an adapter for rivets.js provided, which does the following customisations:</p>
<ul>
<li>prefix is <code>ep-</code> for your data bindings</li>
<li>the adapter suffix is <code>#</code></li>
</ul>
<p>Example view implementation:</p>
<pre class="prettyprint linenums"><code class="lang-ace">require([
    &#39;epik/index&#39;,
    &#39;epik/view&#39;,
    &#39;epik/model&#39;,
    &#39;epik/plugins/rivets-adapter&#39;
], function(epik, View, Model, rivets) {

    var primish = epik.primish;

    var MyView = primish({
        // mixin the rivets class
        implement: [rivets],
        extend: View,
        options: {
            template: &#39;&#39;
        },
        constructor: function(options){
            this.parent(&#39;constructor&#39;, options);
            this.element.innerHTML = this.options.template;
            this.bindRivets(this.element, {
                person: this.model
            });
        },
        destroy: function(){
            this.unbindRivets();
            this.parent(&#39;destroy&#39;);
        }
    });

    var person = new Model({
        name: &#39;Bob&#39;
    });

    // new view with bi-directional binding between model and dom.
    var myView = new MyView({
        element: document.getElementById(&#39;main&#39;),
        model: person,
        template: &#39;Name: &lt;span ep-text=&quot;person#name&quot;&gt;&lt;/span&gt;&lt;br/&gt;&lt;input ep-value=&quot;person#name&quot;/&gt;&#39;
    });

    setTimeout(function(){
        person.set(&#39;name&#39;, &#39;Robert&#39;);
    }, 1500);
});
</code></pre>
<p>Any change of the model will fire events which the adapter is listening for and will automatically update the view
for the relevant bound nodes. Conversely, changes from the DOM via conventional <code>onChange</code> events will be exported
to the model&#39;s <code>.set()</code> method (subject to validation rules).</p>
<p>Collections are similarly implemented. Notice the use of <code>ep-</code> as opposed to <code>rv-</code> and the <code>#</code> call to pass through
the epik adapter (the rivets default PJSO one is <code>.</code> and it can still be used)</p>
<p>The full spectrum of Rivets.js API will work as expected.</p>
<h3 id="view-rivetsadapter/bindrivets">bindRivets</h3>
<p>Sugar that passes an object to be bound to <code>this.element</code>. Optionally, you can pass a different element as the first
argument. Creates a <code>this.boundRivets</code> property on the object, containing reference to the current rivet view context instance</p>
<h3 id="view-rivetsadapter/unbindrivets">unbindRivets</h3>
<p>Used as a destructor to unbind existing events from <code>this.boundRivets</code></p>
<h3 id="view-rivetsadapter/syncrivets">syncRivets</h3>
<p>A method that calls <code>rivets.sync()</code> on the bound view to force manual processing, like <code>$digest</code></p>
<h2 id="contributing">Contributing</h2>
<p>Whilst this is being ported, you can help. Fork the repo or ask for commit access.</p>
<pre><code class="lang-sh">$ git clone git@github.com:DimitarChristoff/epik.git
...
$ cd epik/
$ npm i
...
$ bower install
...
$ cd test/
$ buster-static
...
</code></pre>
<p>Examples - run a grunt express server with socket.io etc. Install grunt if you don&#39;t have it, then run from root of the repo.</p>
<pre><code class="lang-sh">$ npm install -g grunt-cli
$ grunt
$ grunt build
$ grunt requirejs
</code></pre>
<p>The web server is on port 8000 - visit <a href="http://locahost:8000/example/"><a href="http://locahost:8000/example/">http://locahost:8000/example/</a></a> to view live examples</p>

	
</div>
<script type="text/template" id="custom-download">
	<div class="row">
	<span class='span4'>
		<h3>Customise your build of Epitome.</h3>
		<div id='download'>
			<a target="_blank" class="btn btn-large btn-primary download-link" href='#'>Download Epitome</a>
		</div>
		<p>
			The list of AMD modules on the right will be passed to our builder, powered by <code>r.js</code> and built automatically.
			Your build will get a small hash that can be used to download the same packaged Epitome release later on.</p>
		<p>
			The builder does not need all dependencies passed, eg. <code>?build=epitome-collection</code> will automatically pull in
			any required modules.
		</p>
	</span>
	<span class="span4">
		<table id='builder' class='table table-striped table-bordered table-condensed'>
			<tbody>
			</tbody>
		</table>
	</span>
	</div>
</script>
<script src="js/mootools-yui-compressed.js"></script>
<script src="js/moostrap-scrollspy.js"></script>
<script src="js/prettify.js"></script>
<script src="js/lang-css.js"></script>
<script src="js/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="js/doctor.js"></script>
	
</body>
</html>